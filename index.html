<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Ù…Ø´Ø±ÙˆØ¹ Ø£ØªÙ…ØªØ© ÙˆØ¥Ø¯Ø§Ø±Ø© Ù„ÙŠØ¯ Ù…Ø±ÙƒØ² Ø¨Ù† Ø±Ø´Ø¯ Ù„Ù„Ø¹ÙŠÙˆÙ†</title>
<link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700;800&display=swap" rel="stylesheet">
<style>
:root{
  --bg:#0b1324; --card:#121a2e; --muted:#7b8ab8; --text:#e6ecff;
  --accent:#601F45; --accent-2:#28c76f; --accent-3:#00bcd4;
  --warning:#ffb703; --danger:#ff4d4f; --radius:18px; --shadow:0 10px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
body{margin:0;background: radial-gradient(1200px 700px at 70% -10%, #1b2340 0%, #0b1324 60%);color:var(--text);font-family:'Tajawal',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;height:100dvh;overflow:hidden}
.app{height:100%;display:grid;grid-template-rows:auto 1fr auto}

/* HEADER */
header{display:flex;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid rgba(255,255,255,.06);background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,0))}
header .title{font-weight:800;letter-spacing:.4px;display:flex;align-items:center;gap:10px}
header .title .dot{width:10px;height:10px;background:var(--accent);border-radius:50%;box-shadow:0 0 0 6px rgba(96,31,69,.2)}
header .meta{color:var(--muted);font-size:14px;display:flex;align-items:center;gap:10px}
#test-status{padding:2px 8px;border-radius:999px;border:1px solid rgba(255,255,255,.14);font-weight:700}

/* STAGE & FLIPBOOK */
.stage{position:relative;height:calc(100dvh - 140px);display:grid;place-items:center;padding:22px}
.book{position:relative;width:min(1180px,96vw);height:min(640px,72vh);perspective:1800px}
.page{position:absolute;inset:0;background:linear-gradient(165deg,#151e36,#0e162b);border-radius:var(--radius);box-shadow:var(--shadow);padding:clamp(12px,2.4vw,32px);display:grid;grid-template-rows:auto 1fr;gap:16px;transform-origin:right center;backface-visibility:hidden;opacity:0;pointer-events:none;overflow:hidden;margin-top: 10px;}
.page.active{opacity:1;pointer-events:auto;animation:flipIn .7s cubic-bezier(.4,.2,.2,1) both}
.page.exit{animation:flipOut .7s cubic-bezier(.4,.2,.2,1) both}
@keyframes flipIn{from{transform:rotateY(-12deg) translateX(18px);opacity:0}to{transform:rotateY(0) translateX(0);opacity:1}}
@keyframes flipOut{from{transform:rotateY(0) translateX(0);opacity:1}to{transform:rotateY(12deg) translateX(-18px);opacity:0}}

/* Ù‚Ø¨Ù„: justify-content:space-between; */
.head{display:flex;align-items:center;flex-direction:row-reverse;justify-content:space-between;gap:12px}
.head .h2{text-align:right}
.head .tag{margin-left:auto}

.tag{font-size:12px;color:#bfd2ff;background:rgba(0,188,212,.15);border:1px solid rgba(0,188,212,.35);padding:6px 10px;border-radius:999px}
.h1{font-size:clamp(20px,3.8vw,38px);font-weight:800;line-height:1.2}
.h2{font-size:clamp(18px,2.6vw,26px);font-weight:700;color:#d9e4ff}
.muted{color:var(--muted)}

.grid{display:grid;grid-template-columns:repeat(12,1fr);gap:clamp(10px,1.2vw,18px);height:100%;max-width:100%;overflow:hidden}
.card{background:linear-gradient(180deg,rgba(255,255,255,.02),rgba(255,255,255,.01));border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:clamp(10px,1.4vw,10px);overflow:hidden;max-width:100%;box-sizing:border-box}

/* bullets & mini sheets */
.bullets{display:grid;gap:10px}
.bullets li{list-style:none;margin-right: -16px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:12px 14px;border-radius:12px;position:relative}
.bullets li:before{content:"";position:absolute;inset-inline-end:-6px;top:14px;width:8px;height:8px;border-radius:50%;background:var(--danger);box-shadow:0 0 0 6px rgba(255,77,79,.18)}
.sheets-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;height:100%}
.mini-sheet{background:#0f1730;border:1px solid rgba(255,255,255,.08);border-radius:10px;padding:10px;display:grid;gap:6px;min-height:110px}
.mini-row{height:8px;border-radius:5px;background:rgba(255,255,255,.07)}
.mini-row:nth-child(2n){background:rgba(255,255,255,.12)}
.page[data-index="1"] .bullets li:before{inset-inline-start:-6px;inset-inline-end:auto}

/* Flow (index=3) */
.flow{position:relative;height:100%;overflow:hidden}
.node{position:absolute;width:96px;height:96px;border-radius:50%;display:grid;place-items:center;color:#fff;font-weight:800;text-align:center;transition:all .3s}
.node.platform{background:linear-gradient(145deg,#27365f,#182444);border:1px solid rgba(255,255,255,.08)}
.node.core{border-radius:16px;width:200px;height:120px;background:linear-gradient(145deg,#1c2a52,#152140);border:1px solid rgba(255,255,255,.08)}
.badge{font-size:11px;color:#bcd1ff;margin-top:4px;font-weight:600}
.node.platform{right:24px}
.p-google{top:10%}.p-meta{top:28%}.p-snap{top:46%}.p-tt{top:64%}.p-site{top:82%;width:96px;height:96px;border:1px dashed rgba(255,255,255,.14);background:rgba(255,255,255,.03)}
.node.platform::after{content:"";position:absolute;left:-16px;top:50%;transform:translateY(-50%);width:0;height:0;border-top:7px solid transparent;border-bottom:7px solid transparent;border-right:10px solid rgba(188,209,255,.8);filter:drop-shadow(0 0 6px rgba(188,209,255,.35))}
.db{right:50%;top:50%;transform:translate(50%,-50%)}
.crm{left:24px;top:50%;transform:translateY(-50%);width:260px}
.flow svg{width:100%;height:100%;position:absolute;inset:0;z-index:0}

/* -------- Reports (index=4) -------- */
.reports2{display:grid;grid-template-rows:auto 1fr;gap:14px;height:100%}
.reports-top{display:grid;grid-template-columns:1.3fr 1fr;gap:16px;min-height:0}
.reports-top>*{min-height:0}
.reports-bottom{min-height:0}
.chart-wrap{display:grid;grid-template-rows:auto 1fr;gap:10px;min-width:0;min-height:0}
.chart{position:relative;display:flex;align-items:flex-end;justify-content:space-around;gap:18px;padding:16px 16px 50px;height:100%;min-height:220px;border:1px solid rgba(255,255,255,.08);border-radius:14px;background:rgba(255,255,255,.03);overflow:hidden}
.bar{width:44px;background:linear-gradient(180deg,rgba(40,199,111,.25),rgba(40,199,111,.9));border:1px solid rgba(40,199,111,.45);border-radius:14px 14px 8px 8px;height:12%;transition:height 1s ease}
.bar.lose{background:linear-gradient(180deg,rgba(255,77,79,.25),rgba(255,77,79,.9));border-color:rgba(255,77,79,.45)}
.x-labels{position:absolute;bottom:10px;left:0;width:100%;display:flex;justify-content:space-around;color:var(--muted);font-size:13px;font-weight:700}
.kpis-row{display:grid;grid-template-columns:repeat(4, 1fr);gap:12px}
.kpi{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:14px;border-radius:14px;display:flex;align-items:center;justify-content:space-between}
.kpi .label{color:#bcd1ff;font-weight:700}
.kpi .val{font-weight:900;font-size:28px}
.table-card{background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);border-radius:14px;padding:12px 14px;overflow:visible}
.table-title{font-weight:800;margin:4px 6px 10px;color:#d9e4ff}
.winners-table{width:100%;border-collapse:separate;border-spacing:0 8px;font-size:14px;table-layout:fixed}
.winners-table th{color:#a9bdf4;font-weight:700;text-align:right;padding:8px 10px}
.winners-table td{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.08);padding:10px;border-radius:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.winners-table td:nth-child(1){width:28%}
.winners-table td:nth-child(2){width:52%}
.winners-table td:nth-child(3){width:20%;text-align:left;font-weight:800}
.winners-table tbody tr{height:48px}

/* Ø§Ø³ØªØ¬Ø§Ø¨Ø© */
@media (max-width:990px){
  .reports-top{grid-template-columns:1fr}
  .kpis-row{grid-template-columns:1fr 1fr}
}

/* FOOTER */
footer{display:flex;align-items:center;justify-content:space-between;gap:12px;padding:14px 18px;border-top:1px solid rgba(255,255,255,.06)}
.controls{display:flex;align-items:center;gap:10px}
.btn{background:linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.03));border:1px solid rgba(255,255,255,.14);color:var(--text);padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700;box-shadow:var(--shadow);user-select:none;transition:.15s transform}
.btn:hover{transform:translateY(-1px)}
.btn:active{transform:translateY(0)}
.progress{height:8px;flex:1;background:rgba(255,255,255,.08);border-radius:999px;overflow:hidden}
.progress>span{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--accent),#93406c);transition:width .35s ease}

/* ====== Tighten flow slide (index=3) ====== */
.page[data-index="3"] .flow{padding-inline:40px}
.page[data-index="3"] .crm{left:140px;width:260px}
.page[data-index="3"] .db{right:50%;transform:translate(50%,-50%)}
.page[data-index="3"] .node.platform{right:140px}
.page[data-index="3"] .p-google{top:6%}.page[data-index="3"] .p-meta{top:24%}
.page[data-index="3"] .p-snap{top:42%}.page[data-index="3"] .p-tt{top:60%}
.page[data-index="3"] .p-site{top:78%}
.page[data-index="3"] .node.platform{width:90px;height:90px}
.page[data-index="3"] .node.core{width:200px;height:116px}

/* ==================== Solutions Slide (index 2) â€“ match problems ==================== */
/* === Slide 2 Kanban â†’ Real CRM look === */

/* 1) Grid: Ø«Ù„Ø§Ø«Ø© Ø£Ø¹Ù…Ø¯Ø© Ù…ØªØ³Ø§ÙˆÙŠØ© Ø¨Ø§Ø±ØªÙØ§Ø¹ Ø§Ù„Ø³Ù„Ø§ÙŠØ¯ ÙƒÙ„Ù‡ */
.page[data-index="2"] .kanban{
  display:grid;
  grid-template-columns:repeat(3, minmax(0,1fr));
  gap:14px;
  height:100%;
  align-items:stretch;
}

/* 2) Ø¹Ù…ÙˆØ¯ ÙƒØ§Ù†Ø¨Ø§Ù†: ÙƒØ±Øª ØºØ§Ù…Ù‚ Ø¨Ø¸Ù„ Ø®ÙÙŠÙ ÙˆØ­ÙˆØ§Ù ÙƒØ¨ÙŠØ±Ø© */
.page[data-index="2"] .kb-col{
  display:flex;
  flex-direction:column;
  min-width:0;
  background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.10));
  border:1px solid rgba(255,255,255,.06);
  border-radius:18px;
  padding:12px;
  box-shadow: 0 10px 24px rgba(0,0,0,.25);
}

/* 3) Ù‡ÙŠØ¯Ø± Ø§Ù„Ø¹Ù…ÙˆØ¯ ÙƒØ¨Ø§Ø¯Ø¬ Pill + Ø«Ø§Ø¨Øª Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø³Ù‘ÙƒØ±ÙˆÙ„ */
.page[data-index="2"] .kb-title{
  position:sticky; top:0; z-index:2;
  display:flex; align-items:center; justify-content:space-between;
  gap:10px; padding:10px 12px; margin-bottom:10px;
  border-radius:12px;
  background:rgba(0,0,0,.25);
  border:1px solid rgba(255,255,255,.08);
  font-weight:800; color:#eaf2ff;
}
.page[data-index="2"] .kb-badge{
  font-weight:800;
  background:rgba(40,199,111,.18);
  border:1px solid rgba(40,199,111,.45);
  color:#b9f4cf;
  padding:4px 10px; border-radius:999px;
}

/* 4) Ù„Ø³Øª Ø§Ù„ÙƒØ±ÙˆØª: Ø¹Ù…ÙˆØ¯ÙŠØ©ØŒ ØªØ³ÙƒÙ‘Ø±ÙˆÙ„ Ø¯Ø§Ø®Ù„ÙŠ ÙÙ‚Ø· */
.page[data-index="2"] .kb-list{
  flex:1 1 auto;
  display:flex; flex-direction:column;
  gap:12px; min-height:0; overflow:auto;
  padding:2px 4px 2px 2px;
}

/* 5) ÙƒØ§Ø±Øª Ø§Ù„Ù„ÙŠØ¯: ØºØ§Ù…Ù‚ØŒ Ø¸Ù„Ù‘ØŒ Ø£ÙŠÙ‚ÙˆÙ†Ø©ØŒ Ø§Ø±ØªÙØ§Ø¹ Ø¹Ù„Ù‰ Ù‚Ø¯Ù‘ Ø§Ù„Ù…Ø­ØªÙˆÙ‰ */
.page[data-index="2"] .kb-card{
  position:relative;
  background:linear-gradient(180deg, rgba(27,33,52,.95), rgba(20,26,43,.95));
  border:1px solid rgba(255,255,255,.10);
  border-radius:14px;
  padding:14px 14px 12px 14px;
  line-height:1.7;
  box-shadow: 0 8px 22px rgba(0,0,0,.28);
  transition:.15s transform, .2s box-shadow;
  height:auto; min-height:unset; width:100%;
  white-space:normal; word-break:break-word; overflow:visible;
}
.page[data-index="2"] .kb-card:hover{
  transform:translateY(-3px);
  box-shadow: 0 14px 28px rgba(0,0,0,.35);
}

/* 6) ØªØ±ÙˆÙŠØ³Ø© ØµØºÙŠØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„ÙƒØ§Ø±Øª (Ø£ÙŠÙ‚ÙˆÙ†Ø© ÙˆØ±Ù‚) */
.page[data-index="2"] .kb-card::before{
  content:"ğŸ“„";
  position:absolute; inset-inline-start:10px; top:10px;
  opacity:.7; font-size:16px;
}

/* 7) Ù…ÙŠØªØ§ ÙˆØ®ØªÙ… Ø§Ù„Ø­Ø§Ù„Ø© (Ø²ÙŠ In progress) */
.page[data-index="2"] .kb-meta{
  display:flex; align-items:center; justify-content:space-between;
  color:#c7d6ff; font-size:12px; margin-top:10px;
}
.page[data-index="2"] .kb-chip{
  font-size:12px; font-weight:800;
  padding:3px 10px; border-radius:999px;
  border:1px solid rgba(255,120,120,.35);
  background:rgba(255,120,120,.18); /* Ø´ÙƒÙ„ In progress */
  color:#ffd6d6;
}

/* 8) ØªÙ†ÙˆÙŠØ¹ Ø£Ù„ÙˆØ§Ù† Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© (Ø§Ø®ØªÙŠØ§Ø±ÙŠ Ø®ÙÙŠÙ Ø²ÙŠ Ø§Ù„ØµÙˆØ±Ø©) */
.page[data-index="2"] .kb-col.new   { background:linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.10)); }
.page[data-index="2"] .kb-col.follow{ background:linear-gradient(180deg, rgba(64,32,0,.18), rgba(64,32,0,.10)); }
.page[data-index="2"] .kb-col.book  { background:linear-gradient(180deg, rgba(0,32,16,.18), rgba(0,32,16,.10)); }
.page[data-index="2"] .kb-col.new   .kb-title{ background:rgba(0,0,0,.28) }
.page[data-index="2"] .kb-col.follow .kb-title{ background:rgba(64,32,0,.28) }
.page[data-index="2"] .kb-col.book   .kb-title{ background:rgba(0,32,16,.28) }

/* 9) Ø´Ø±ÙŠØ· ØªÙ…Ø±ÙŠØ± Ø£Ù†ÙŠÙ‚ Ø¯Ø§Ø®Ù„ Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© */
.page[data-index="2"] .kb-list::-webkit-scrollbar{width:8px}
.page[data-index="2"] .kb-list::-webkit-scrollbar-thumb{
  background:rgba(255,255,255,.12); border-radius:999px;
}
.page[data-index="2"] .kb-list::-webkit-scrollbar-track{background:transparent}

/* 10) ØªØ¨Ø§Ø¹Ø¯ Ø£ÙØ¶Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø¹Ù…Ø¯Ø© ÙˆØ§Ù„ÙƒØ±ÙˆØª Ø¹Ù„Ù‰ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
@media (max-width: 1024px){
  .page[data-index="2"] .kanban{grid-template-columns:1fr; gap:12px}
}
/* === ØªØ­Ø³ÙŠÙ† Ù…Ø­Ø§Ø°Ø§Ø© Ø§Ù„ÙƒØ±ÙˆØª Ø¯Ø§Ø®Ù„ Ø§Ù„Ù€CRM (Slide 2) === */

/* Ø¹Ù†ÙˆØ§Ù† Ø§Ù„Ù„ÙŠØ¯ + Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¬Ù†Ø¨ Ø¨Ø¹Ø¶ */
.page[data-index="2"] .kb-card{
  display:flex;
  flex-direction:column;
  gap:8px;
  padding:14px;
  position:relative;
}
.page[data-index="2"] .kb-card-header{
  display:flex;
  align-items:center;
  gap:8px;
  font-weight:700;
  color:#e9f1ff;
  line-height:1.6;
}

/* Ø§Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø¬Ù†Ø¨ Ø§Ù„Ù†Øµ Ù…Ø´ ÙÙˆÙ‚Ù‡ */
.page[data-index="2"] .kb-card-header::before{
  content:"ğŸ“„";
  font-size:16px;
  opacity:.75;
}

/* Ø¶Ø¨Ø· Ø§Ù„Ø´ÙŠØ¨ ÙˆØ§Ù„ØªØ§Ø±ÙŠØ® Ø£Ø³ÙÙ„ Ø§Ù„Ø¹Ù†ÙˆØ§Ù† */
.page[data-index="2"] .kb-meta{
  display:flex;
  flex-direction:column;
  align-items:flex-start;
  gap:3px;
  font-size:12px;
  color:#a9bdf4;
}

/* Ø§Ù„Ø´ÙŠØ¨ Ù†ÙØ³Ù‡ Ø¨Ø§Ø±ØªÙØ§Ø¹ Ø«Ø§Ø¨Øª ÙˆÙˆØ³ÙŠØ· */
.page[data-index="2"] .kb-chip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  height:22px;
  min-width:70px;
  padding:0 10px;
  border-radius:999px;
  font-size:12px;
  font-weight:700;
  border:1px solid rgba(255,120,120,.35);
  background:rgba(255,120,120,.18);
  color:#ffd6d6;
}

/* Ø¥Ø²Ø§Ù„Ø© Ø£ÙŠÙ‚ÙˆÙ†Ø© ::before Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© Ø¹Ø´Ø§Ù† Ù…Ø§ ØªØªÙƒØ±Ø± */
.page[data-index="2"] .kb-card::before{content:none;}

/* ==================================================================== */
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="title"><span class="dot"></span> Ø¨Ø±Ø²Ù†ØªÙŠØ´Ù† Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„ÙŠØ¯Ø² (Flipbook)</div>
    <div class="meta">HTML â€¢ CSS â€¢ JS <span id="test-status">Tests: pending</span></div>
  </header>

  <main class="stage">
    <div id="book" class="book">
      <!-- Slide 1 -->
      <section class="page active" data-index="0">
        <div class="head"><span class="tag">Ù…Ø´Ø±ÙˆØ¹ Ø£ØªÙ…ØªØ© ÙˆØ¥Ø¯Ø§Ø±Ø© Ù„ÙŠØ¯ Ù…Ø±ÙƒØ² Ø¨Ù† Ø±Ø´Ø¯ Ù„Ù„Ø¹ÙŠÙˆÙ†</span></div>
        <div class="grid">
          <div class="card" style="grid-column: span 7; display:grid; place-content:center;">
            <div class="h1">Ù…Ù† Ø§Ù„ÙÙˆØ¶Ù‰ Ø¥Ù„Ù‰ Ø§Ù„Ù†Ø¸Ø§Ù…:<br/>ØªØ¬Ù…ÙŠØ¹ ÙˆØ¥Ø¯Ø§Ø±Ø© Ø§Ù„Ù„ÙŠØ¯Ø² Ø¨Ø·Ø±ÙŠÙ‚Ø© Ø°ÙƒÙŠØ©</div>
            <p class="muted">Ø­Ù„ Ù…ÙˆØ­Ø¯ ÙŠØ®ØªØµØ± Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ø¬Ù‡Ø¯ ÙˆÙŠØ±ÙØ¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„Ø§Øª</p>
          </div>
          <div class="card" style="grid-column: span 5; display:grid; place-content:center; text-align:center;">
            <div style="font-size:120px; line-height:1">ğŸ“˜</div>
            <div class="badge">Ø§Ù‚Ù„Ø¨ Ø§Ù„ØµÙØ­Ø© Ù„Ù„Ø¨Ø¯Ø¡ âŸµâŸ¶</div>
          </div>
        </div>
      </section>

      <!-- Slide 2 (Ø§Ù„Ù…Ø´ÙƒÙ„Ø©) -->
      <section class="page" data-index="1">
        <div class="head"><span class="tag">Ø§Ù„Ù…Ø´ÙƒÙ„Ø©</span><div class="h2">Ø§Ù„ÙˆØ¶Ø¹ Ø§Ù„ØªÙ‚Ù„ÙŠØ¯ÙŠ Ø§Ù„Ù…Ø±Ù‡Ù‚</div></div>
        <div class="grid">
          <div class="card" style="grid-column: 1 / span 6;"><div id="sheetsGrid" class="sheets-grid"></div></div>
          <div class="card" style="grid-column: 7 / span 6;">
            <ul class="bullets">
                <li><b>ØªØ¹Ø¯Ø¯ Ø§Ù„Ù…Ù†ØµØ§Øª ÙˆØªØ¬Ø²Ø¦Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª:</b> Ø§Ù„Ø­Ù…Ù„Ø§Øª Ù…ÙˆØ²Ø¹Ø© Ø¹Ù„Ù‰ Ø¬ÙˆØ¬Ù„ ÙˆÙ…ÙŠØªØ§ ÙˆØ³Ù†Ø§Ø¨ ÙˆØªÙŠÙƒ ØªÙˆÙƒ Ø¨Ø¯ÙˆÙ† Ù†Ø¸Ø§Ù… Ù…ÙˆØ­Ù‘Ø¯ Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„Ù„ÙŠØ¯Ø².</li>
                <li><b>ØªØ¬Ù…ÙŠØ¹ ÙŠØ¯ÙˆÙŠ Ù…Ø±Ù‡Ù‚:</b> Ø§Ø¹ØªÙ…Ø§Ø¯ ÙƒØ§Ù…Ù„ Ø¹Ù„Ù‰ ØªØµØ¯ÙŠØ± Ù…Ù„ÙØ§Øª Excel ÙˆØ¯Ù…Ø¬Ù‡Ø§ ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù…Ù…Ø§ ÙŠØ³Ø¨Ø¨ Ø£Ø®Ø·Ø§Ø¡ ÙˆØªÙƒØ±Ø§Ø± Ø¨ÙŠØ§Ù†Ø§Øª.</li>
                <li><b>ØªØ£Ø®ÙŠØ± ÙÙŠ ØªØ³Ù„ÙŠÙ… Ø§Ù„Ù„ÙŠØ¯Ø²:</b> Ø§Ù†ØªÙ‚Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙŠØ¯ÙˆÙŠÙ‹Ø§ Ù„Ù„ÙƒÙˆÙ„ Ø³Ù†ØªØ± ÙŠØ¤Ø¯ÙŠ Ù„ØªØ£Ø®Ø± ÙÙŠ Ø§Ù„ØªÙˆØ§ØµÙ„ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡.</li>
                <li><b>Ø³Ù‚ÙˆØ· ÙˆÙÙ‚Ø¯Ø§Ù† Ù„ÙŠØ¯Ø²:</b> ØºÙŠØ§Ø¨ Ø§Ù„ØªØªØ¨Ø¹ Ø§Ù„ÙÙˆØ±ÙŠ ÙŠØ³Ø¨Ø¨ Ø¶ÙŠØ§Ø¹ Ø¹Ø¯Ø¯ Ù…Ù† Ø§Ù„Ø¹Ù…Ù„Ø§Ø¡ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ù†Ù‚Ù„ Ø£Ùˆ Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø©.</li>
                <li><b>Ø¨Ø·Ø¡ ÙÙŠ Ø§Ù„ÙÙŠØ¯Ø¨Ø§Ùƒ:</b> ØªØ£Ø®Ø± Ø§Ù„Ù…ÙŠØ¯ÙŠØ§ Ø¨Ø§ÙŠØ±Ø² ÙÙŠ Ø§Ø³ØªÙ„Ø§Ù… Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ÙŠØ¶Ø¹Ù Ø§Ù„ØªØ­Ø³ÙŠÙ† ÙˆÙŠØ¤Ø®Ø± Ù‚Ø±Ø§Ø±Ø§Øª Ø§Ù„ØªØ³ÙˆÙŠÙ‚.</li>
                <li><b>Ù‡Ø¯Ø± ÙÙŠ Ø§Ù„ÙˆÙ‚Øª ÙˆØ§Ù„Ù…ÙˆØ§Ø±Ø¯:</b> Ø§Ù„ÙØ±ÙŠÙ‚ ÙŠÙ‚Ø¶ÙŠ Ø³Ø§Ø¹Ø§Øª ÙŠÙˆÙ…ÙŠÙ‹Ø§ ÙÙŠ Ø¬Ù…Ø¹ ÙˆØªÙ†Ø¸ÙŠÙ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø¯Ù„ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ø£Ø¯Ø§Ø¡.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Slide 3 (Ø§Ù„Ø­Ù„ÙˆÙ„) -->
      <section class="page" data-index="2">
        <div class="head">
          <span class="tag">Ø±Ø³Ù… ØªÙˆØ¶ÙŠØ­ÙŠ Ù„ÙÙƒØ±Ø© Ø§Ù„Ù…Ø´Ø±ÙˆØ¹</span>
          <div class="h2">Ù…Ù†Ø¸ÙˆÙ…Ø© Ù…ÙˆØ­Ù‘ÙØ¯Ø©: ØªØ¬Ù…ÙŠØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ âœ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª âœ CRM âœ Ù…ØªØ§Ø¨Ø¹Ø© ÙØ¹Ù‘Ø§Ù„Ø©</div>
        </div>
        <div class="grid">
          <!-- Ø´Ù…Ø§Ù„: Ø´ÙƒÙ„ Ø§Ù„Ù€ CRM -->
          <div class="card" style="grid-column: 1 / span 6;">
            <div class="kanban">
              <div class="kb-col new">
                <div class="kb-title">New Lead <span class="kb-badge">3</span></div>
                <div class="kb-list">
                  <div class="kb-card">Ù†Ù…ÙˆØ°Ø¬ Ù…ÙˆÙ‚Ø¹ â€“ Ø­Ø¬Ø² Ø§Ø³ØªØ´Ø§Ø±Ø©
                    <div class="kb-meta"><span class="kb-chip">Website</span><span>Ù‚Ø¨Ù„ 5 Ø¯Ù‚Ø§Ø¦Ù‚</span></div>
                  </div>
                  <div class="kb-card">Ø­Ù…Ù„Ø© Search â€“ Ø£Ø³Ù†Ø§Ù†
                    <div class="kb-meta"><span class="kb-chip">Google</span><span>Ù‚Ø¨Ù„ 12 Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
                  </div>
                  <div class="kb-card">Lead Form â€“ Reels
                    <div class="kb-meta"><span class="kb-chip">Meta</span><span>Ù‚Ø¨Ù„ 20 Ø¯Ù‚ÙŠÙ‚Ø©</span></div>
                  </div>
                </div>
              </div>
              <div class="kb-col follow">
                <div class="kb-title">Follow Up <span class="kb-badge">2</span></div>
                <div class="kb-list">
                  <div class="kb-card">Ù…ÙƒØ§Ù„Ù…Ø© Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø±Ø¯ â€“ Ø¥Ø¹Ø§Ø¯Ø© Ù…Ø­Ø§ÙˆÙ„Ø©
                    <div class="kb-meta"><span class="kb-chip">Call</span><span>Ø§Ù„ÙŠÙˆÙ… 12:10</span></div>
                  </div>
                  <div class="kb-card">Ø·Ù„Ø¨ Ø¥Ø±Ø³Ø§Ù„ ØªÙØ§ØµÙŠÙ„ ÙˆØ§ØªØ³Ø§Ø¨
                    <div class="kb-meta"><span class="kb-chip">WhatsApp</span><span>Ø§Ù„ÙŠÙˆÙ… 11:35</span></div>
                  </div>
                </div>
              </div>
              <div class="kb-col book">
                <div class="kb-title">Reservation <span class="kb-badge">2</span></div>
                <div class="kb-list">
                  <div class="kb-card">Ø­Ø¬Ø² Ù…Ø¤ÙƒØ¯ â€“ Ø¹ÙŠØ§Ø¯Ø© Ø¬Ø¯Ø©
                    <div class="kb-meta"><span class="kb-chip">Booked</span><span>ØºØ¯Ù‹Ø§ 5:30 Ù…</span></div>
                  </div>
                  <div class="kb-card">ØªØ£ÙƒÙŠØ¯ Ù…ÙˆØ¹Ø¯ â€“ ÙƒØ´Ù Ù…Ø¨Ø¯Ø¦ÙŠ
                    <div class="kb-meta"><span class="kb-chip">Booked</span><span>Ø§Ù„Ø³Ø¨Øª 3:00 Ù…</span></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- ÙŠÙ…ÙŠÙ†: Ù†Ù‚Ø§Ø· Ø§Ù„Ø­Ù„ÙˆÙ„ Ø¨Ù†ÙØ³ Ø³ØªØ§ÙŠÙ„ Ø§Ù„Ù…Ø´Ø§ÙƒÙ„ -->
          <div class="card" style="grid-column: 7 / span 6;">
            <ul class="bullets">
              <li><b>ØªØ¬Ù…ÙŠØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ø­Ø¸ÙŠ Ù„Ù„ÙŠØ¯Ø²:</b> Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ ÙƒÙ„ Ø§Ù„Ù†Ù…Ø§Ø°Ø¬ Ù…Ù† Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù…Ù†ØµØ§Øª Ø¨Ø¯ÙˆÙ† ØªØ¯Ø®Ù„ ÙŠØ¯ÙˆÙŠ.</li>
              <li><b>ÙˆØ§Ø¬Ù‡Ø© CRM Ù…ÙˆØ­Ù‘ÙØ¯Ø©:</b> ÙƒÙ„ Ø§Ù„Ù„ÙŠØ¯Ø² ØªØ¸Ù‡Ø± ÙÙŠ Ù…ÙƒØ§Ù† ÙˆØ§Ø­Ø¯ Ù…Ø¹ Ø±Ø¤ÙŠØ© Ø´Ø§Ù…Ù„Ø© Ù„Ù„Ø­Ø§Ù„Ø© ÙˆØ§Ù„ØªØ§Ø±ÙŠØ®.</li>
              <li><b>ØªÙ†Ø¸ÙŠÙ… Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆÙ‡Ù†Ø¯Ù„ØªÙ‡Ø§:</b> Ø³Ù‡ÙˆÙ„Ø© ØªÙˆØ²ÙŠØ¹ Ø§Ù„Ù…Ù‡Ø§Ù… Ø¹Ù„Ù‰ Ø§Ù„ÙƒÙˆÙ„ Ø³Ù†ØªØ± Ù…Ø¹ Ø­Ù‚ÙˆÙ„ Ù‚ÙŠØ§Ø³ÙŠØ© ÙˆÙ‚ÙˆØ§Ø¹Ø¯ ØªÙ†Ø¨ÙŠÙ‡.</li>
              <li><b>Ù‚ÙŠØ§Ø³ KPIs Ù„Ù„ÙƒÙˆÙ„ Ø³Ù†ØªØ±:</b> Ø¹Ø¯Ø¯ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø§ØªØŒ Ø³Ø±Ø¹Ø© Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø©ØŒ Ù†Ø³Ø¨ Ø§Ù„ØªØ­ÙˆÙŠÙ„ Ù„ÙƒÙ„ Ù…Ø±Ø­Ù„Ø©.</li>
              <li><b>ØªÙ‚Ø§Ø±ÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø© ÙˆØªØµØ¯ÙŠØ± Ø³Ù‡Ù„:</b> Ù…Ø¹Ø±ÙØ© Ø§Ù„Ù€ <b>Quality Leads</b> ÙˆØªÙƒÙ„ÙØ© Ø§Ù„Ù„ÙŠØ¯ ÙˆÙ†ØªØ§Ø¦Ø¬ Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø¨Ø¶ØºØ·Ø© Ø²Ø±.</li>
              <li><b>Ø±ÙØ¹ Ø§Ù„ØªØ­ÙˆÙŠÙ„ ÙˆØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ù‡Ø¯Ø±:</b> Ù‚Ø±Ø§Ø±Ø§Øª Ø£Ø³Ø±Ø¹ØŒ ØªÙƒÙ„ÙØ© Ø£Ù‚Ù„ØŒ ÙˆÙˆÙ‚Øª Ø£Ù‚Ù„ ÙÙŠ Ø§Ù„ØªØ¬Ù…ÙŠØ¹ Ø§Ù„ÙŠØ¯ÙˆÙŠ.</li>
            </ul>
          </div>
        </div>
      </section>

      <!-- Slide 4 (Ø§Ù„Ø­Ù„ â€“ ÙÙ„Ùˆ Ø§Ù„Ù…Ù†ØµØ§Øª) -->
      <section class="page" data-index="3">
        <div class="head"><span class="tag">Ø§Ù„Ø­Ù„</span><div class="h2">ØªØ¬Ù…ÙŠØ¹ ØªÙ„Ù‚Ø§Ø¦ÙŠ Ù„Ù„ÙŠØ¯Ø² âœ Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª Ù…ÙˆØ­Ø¯Ø© âœ CRM Ù…ÙˆØ­Ø¯</div></div>
        <div id="flow" class="card flow">
          <div class="node platform p-google">Ø¬ÙˆØ¬Ù„<div class="badge">Google Ads</div></div>
          <div class="node platform p-meta">Ù…ÙŠØªØ§<div class="badge">Facebook/IG</div></div>
          <div class="node platform p-snap">Ø³Ù†Ø§Ø¨<div class="badge">Snap</div></div>
          <div class="node platform p-tt">ØªÙŠÙƒ ØªÙˆÙƒ<div class="badge">TikTok</div></div>
          <div class="node platform p-site">Ø§Ù„Ù…ÙˆÙ‚Ø¹<div class="badge">Website</div></div>
          <div class="node core db">Ù‚Ø§Ø¹Ø¯Ø© Ø¨ÙŠØ§Ù†Ø§Øª<br/><span class="badge">Ù…ÙˆØ­Ø¯Ø©</span></div>
          <div class="node core crm">CRM + Call Center<br/><span class="badge">Ù†Ù‚Ø·Ø© ØªØ´ØºÙŠÙ„ ÙˆØ§Ø­Ø¯Ø©</span></div>
          <svg id="flowSvg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600" preserveAspectRatio="none">
            <defs>
              <path id="p-g" d="M1020,110 C840,120 740,180 600,300" fill="none" stroke="rgba(0,188,212,.25)" stroke-width="2"/>
              <path id="p-m" d="M1020,220 C840,240 740,260 600,300" fill="none" stroke="rgba(0,188,212,.25)" stroke-width="2"/>
              <path id="p-s" d="M1020,330 C840,340 730,320 600,300" fill="none" stroke="rgba(0,188,212,.25)" stroke-width="2"/>
              <path id="p-t" d="M1020,440 C840,420 730,360 600,300" fill="none" stroke="rgba(0,188,212,.25)" stroke-width="2"/>
              <path id="p-w" d="M1020,550 C840,480 720,380 600,300" fill="none" stroke="rgba(0,188,212,.25)" stroke-width="2"/>
              <path id="p-dc" d="M600,300 C480,300 380,300 300,300" fill="none" stroke="rgba(40,199,111,.28)" stroke-width="2"/>
              <radialGradient id="leadGrad" cx="50%" cy="50%" r="50%"><stop offset="0%" stop-color="#6ff2ff"/><stop offset="100%" stop-color="#00bcd4"/></radialGradient>
            </defs>
            <g id="leads"></g>
          </svg>
        </div>
      </section>

      <!-- Slide 5 (Ø§Ù„ØªÙ‚Ø§Ø±ÙŠØ±) -->
      <section class="page" data-index="4">
        <div class="head">
          <span class="tag">Ø³Ù‡ÙˆÙ„Ø© ØªØµØ¯ÙŠØ± ØªÙ‚Ø§Ø±ÙŠØ± Ù‚ÙˆÙŠØ©</span>
          <div class="h2">ØªÙ‚Ø§Ø±ÙŠØ± Ø¯Ù‚ÙŠÙ‚Ø© Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù…ØµØ¯Ø±</div>
        </div>

        <div class="reports2">
          <div class="reports-top">
            <div class="table-card">
              <div class="table-title">Ø§Ù„Ø­Ù…Ù„Ø§Øª Ø§Ù„Ø£Ù†Ø¬Ø­ (CPL Ù„Ù„ÙŠØ¯ Ø§Ù„Ø¬ÙŠØ¯)</div>
              <table class="winners-table" id="winnersTable">
                <thead><tr><th>Ø§Ù„Ù…Ù†ØµØ©</th><th>Ø§Ø³Ù… Ø§Ù„Ø­Ù…Ù„Ø©</th><th>Ø§Ù„ØªÙƒÙ„ÙØ© (SAR)</th></tr></thead>
                <tbody></tbody>
              </table>
            </div>

            <div class="card chart-wrap">
              <div class="muted" style="font-weight:700">Ù…Ù‚Ø§Ø±Ù†Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡ Ø­Ø³Ø¨ Ø§Ù„Ù…Ù†ØµØ©</div>
              <div class="chart" id="chart">
                <div class="bar"></div>
                <div class="bar lose"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="bar"></div>
                <div class="x-labels">
                  <span>Ø§Ù„Ù…ÙˆÙ‚Ø¹</span>
                  <span>ØªÙŠÙƒ ØªÙˆÙƒ</span>
                  <span>Ø³Ù†Ø§Ø¨</span>
                  <span>Ù…ÙŠØªØ§</span>
                  <span>Ø¬ÙˆØ¬Ù„</span>
                </div>
              </div>
            </div>
          </div>

          <div class="reports-bottom">
            <div class="kpis-row">
              <div class="kpi"><span class="label">ØªÙƒÙ„ÙØ© Ø§Ù„Ø­Ù…Ù„Ø§Øª (SAR)</span><span class="val" id="kpi-cost-campaigns">0</span></div>
              <div class="kpi"><span class="label">ØªÙƒÙ„ÙØ© Ø§Ù„ÙƒÙˆØ§Ù„ÙŠØªÙŠ Ù„ÙŠØ¯ (SAR)</span><span class="val" id="kpi-cpl">0</span></div>
              <div class="kpi"><span class="label">Ø¹Ø¯Ø¯ Ø§Ù„Ø­Ø¬ÙˆØ²Ø§Øª</span><span class="val" id="kpi-bookings">0</span></div>
              <div class="kpi"><span class="label">ROAS</span><span class="val" id="kpi-roas">0</span></div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <div class="controls">
      <button id="next" class="btn">Ø§Ù„ØªØ§Ù„ÙŠ âŸ¶</button>
      <button id="prev" class="btn">âŸµ Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
    </div>
    <div class="progress" aria-label="progress"><span id="bar"></span></div>
    <div class="controls">
      <button id="restartAnim" class="btn" title="Ø¥Ø¹Ø§Ø¯Ø© ØªØ´ØºÙŠÙ„ Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†">â†» Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø£Ù†ÙŠÙ…ÙŠØ´Ù†</button>
    </div>
  </footer>
</div>

<script>
document.addEventListener('DOMContentLoaded', ()=>{
  const pages=[...document.querySelectorAll('.page')];
  const progress=document.getElementById('bar');
  const nextBtn=document.getElementById('next'), prevBtn=document.getElementById('prev'), restartBtn=document.getElementById('restartAnim');
  const svg=document.getElementById('flowSvg'); const leadsGroup=svg?svg.querySelector('#leads'):null;
  const NS='http://www.w3.org/2000/svg', XLINK='http://www.w3.org/1999/xlink';
  const PLATFORM_TO_DB_DURATION='2.5s', DB_TO_CRM_DURATION='2.0s';
  let index=0;

  function show(i){
    if(i===index) return;
    const cur=pages[index], nxt=pages[i];
    cur.classList.remove('active'); cur.classList.add('exit');
    nxt.classList.add('active');
    setTimeout(()=>cur.classList.remove('exit'),720);
    index=i; updateProgress(); handleSlideEnter(i);
  }
  function updateProgress(){
    const pct=(index/(pages.length-1))*100;
    progress.style.width=pct+'%';
    prevBtn.disabled=index===0; nextBtn.disabled=index===pages.length-1;
  }
  nextBtn.addEventListener('click',()=>show(Math.min(index+1,pages.length-1)));
  prevBtn.addEventListener('click',()=>show(Math.max(index-1,0)));
  document.addEventListener('keydown',e=>{ if(e.key==='ArrowRight')nextBtn.click(); if(e.key==='ArrowLeft')prevBtn.click(); });

  // Slide 1 mini sheets
  (function buildSheets(){
    const grid=document.getElementById('sheetsGrid'); if(!grid) return;
    for(let i=0;i<9;i++){
      const s=document.createElement('div'); s.className='mini-sheet';
      for(let r=0;r<6;r++){ const row=document.createElement('div'); row.className='mini-row'; s.appendChild(row); }
      grid.appendChild(s);
    }
  })();

  // Flow (index=3) SVG leads
  const platformPaths=['p-g','p-m','p-s','p-t','p-w'];
  function createLeadPair(id){
    const g=document.createElementNS(NS,'g');
    const c1=document.createElementNS(NS,'circle'); c1.setAttribute('r','6'); c1.setAttribute('fill','url(#leadGrad)');
    const a1=document.createElementNS(NS,'animateMotion'); a1.setAttribute('dur',PLATFORM_TO_DB_DURATION); a1.setAttribute('repeatCount','indefinite'); a1.setAttribute('fill','freeze');
    const mp1=document.createElementNS(NS,'mpath'); mp1.setAttributeNS(XLINK,'xlink:href','#'+id); mp1.setAttribute('href','#'+id); a1.appendChild(mp1); c1.appendChild(a1);

    const c2=document.createElementNS(NS,'circle'); c2.setAttribute('r','6'); c2.setAttribute('fill','#28c76f'); c2.setAttribute('opacity','0.9');
    const a2=document.createElementNS(NS,'animateMotion'); a2.setAttribute('dur',DB_TO_CRM_DURATION); a2.setAttribute('repeatCount','indefinite'); a2.setAttribute('fill','freeze');
    const mp2=document.createElementNS(NS,'mpath'); mp2.setAttributeNS(XLINK,'xlink:href','#p-dc'); mp2.setAttribute('href','#p-dc'); a2.appendChild(mp2); c2.appendChild(a2);

    g.appendChild(c1); g.appendChild(c2); return {g,a1,a2};
  }
  let leads=[];
  function buildLeads(){
    if(!leadsGroup) return; leadsGroup.innerHTML=''; leads=[];
    platformPaths.forEach(pid=>{
      for(let k=0;k<3;k++){ const {g,a1,a2}=createLeadPair(pid); leadsGroup.appendChild(g); leads.push({a1,a2,delay:(Math.random()*1.8)+(k*.4)}); }
    });
  }
  function startSVGLeads(){
    if(!svg) return; if(!leads.length) buildLeads(); try{svg.setCurrentTime(0);}catch(e){}
    leads.forEach(l=> setTimeout(()=>{try{l.a1.beginElement()}catch(e){}}, l.delay*1000));
    setTimeout(()=>{ leads.forEach(l=> setTimeout(()=>{try{l.a2.beginElement()}catch(e){}}, l.delay*150)); }, 1250);
  }

  /* ---- Reports (index=4): KPIs + Bars + Table ---- */
  function animateNumberInt(el,to,dur=1100){
    const start=0,t0=performance.now();
    function step(t){ const p=Math.min(1,(t-t0)/dur);
      const val=Math.round(start+(to-start)*(p<.5?(2*p*p):(-1+(4-2*p)*p)));
      el.textContent=val.toLocaleString('ar-EG'); if(p<1) requestAnimationFrame(step);
    } requestAnimationFrame(step);
  }
  function animateNumberFloat(el,to,dec=1,dur=1100,suffix=""){
    const start=0,t0=performance.now();
    function step(t){ const p=Math.min(1,(t-t0)/dur);
      const val=start+(to-start)*(p<.5?(2*p*p):(-1+(4-2*p)*p));
      el.textContent=val.toFixed(dec)+(suffix||""); if(p<1) requestAnimationFrame(step);
    } requestAnimationFrame(step);
  }

  function animateKPIs(){
    animateNumberInt(document.getElementById('kpi-cost-campaigns'), 285000);
    animateNumberInt(document.getElementById('kpi-cpl'), 27);
    animateNumberInt(document.getElementById('kpi-bookings'), 143);
    animateNumberFloat(document.getElementById('kpi-roas'), 3.4, 1, 1100, "x");
  }

  function animateBars(){
    const bars=document.querySelectorAll('#chart .bar');
    const targets=[30,48,60,38,72];
    bars.forEach((b,i)=> requestAnimationFrame(()=> b.style.height=Math.max(10,targets[i])+'%'));
  }

  const winnersData=[
    {platform:'Ø¬ÙˆØ¬Ù„', campaign:'Search - Brand - KSA', cpl:19},
    {platform:'Ø³Ù†Ø§Ø¨', campaign:'Story â€“ Lead Gen â€“ KSA', cpl:23},
    {platform:'Ù…ÙŠØªØ§', campaign:'Reels â€“ Lead Form â€“ KSA', cpl:31},
    {platform:'ØªÙŠÙƒ ØªÙˆÙƒ', campaign:'Spark Ads â€“ Interest', cpl:26},
    {platform:'Ø§Ù„Ù…ÙˆÙ‚Ø¹', campaign:'Organic Forms', cpl:0}
  ];
  function renderWinners(){
    const tbody=document.querySelector('#winnersTable tbody'); if(!tbody) return;
    tbody.innerHTML='';
    winnersData.slice(0,3).forEach(r=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${r.platform}</td><td title="${r.campaign}">${r.campaign}</td><td>${r.cpl.toLocaleString('ar-EG')}</td>`;
      tbody.appendChild(tr);
    });
  }

  function handleSlideEnter(i){
    if(i===3) startSVGLeads();
    if(i===4){ animateKPIs(); animateBars(); renderWinners(); }
  }
  restartBtn.addEventListener('click',()=>handleSlideEnter(index));

  // Tests badge
  (function runTests(){
    const t1=!!document.getElementById('sheetsGrid');
    const t2=!!document.getElementById('flowSvg');
    buildLeads(); const t3=(leads||[]).length>=15;
    const passed=[t1,t2,t3].filter(Boolean).length, badge=document.getElementById('test-status');
    badge.textContent=`Tests: ${passed}/3`;
    badge.style.background=passed===3?'rgba(40,199,111,.18)':'rgba(255,77,79,.18)';
    badge.style.color=passed===3?'#b8ffcf':'#ffd0d0';
    badge.style.borderColor=passed===3?'rgba(40,199,111,.45)':'rgba(255,77,79,.45)';
  })();

  updateProgress();
});
</script>
</body>
</html>
